import{z as Q,u as T,j as e,r as j,A as K,af as q,ag as U,v as J,ah as V,ai as W,aj as X,L as f,a3 as E,ak as F}from"./index-DPJpM76q.js";import{C as c,P as Y,a as Z,b as ee,c as se,R as te,H as ae}from"./index-Bs5U3e3T.js";import{A as re}from"./mp3-icon-b0neAAQW.js";import{f as ne,a as z}from"./utils-ClR9-_0P.js";import{R as oe}from"./RadarChart-D5KehtwF.js";import{B as le}from"./index-wbosR6Za.js";import{S as g}from"./index-Da3FNLPO.js";import{E as P}from"./eye-CZwNeZVC.js";import{B as D}from"./button-lO7XdXyl.js";import{C as ie}from"./cpu-Bx1h3oE9.js";import{D as ce}from"./download-BXWC3Len.js";import{A as me}from"./index-5-U3fXRT.js";import{T as de}from"./index-D2xkBgQN.js";import{F as M}from"./Table-DBR-Ln6h.js";import"./generateCategoricalChart-Dhq0ZDNw.js";import"./index--7a_W_9H.js";import"./index-WMb-X793.js";import"./useSize-DND3t0aL.js";import"./useMergedState-CSfwPUM-.js";import"./roundedArrow-ySD6W0-A.js";import"./context-C9R0sSvt.js";import"./responsiveObserver-C7S2khFd.js";import"./useBreakpoint-CymGIX01.js";import"./SearchOutlined-odOqp1gV.js";import"./Overflow-Cjb5NB4R.js";import"./PurePanel-DmuLXhi4.js";import"./index-CEm8Loj7.js";import"./useIcons-DvB46hj-.js";import"./CheckOutlined-C7HtwBlR.js";import"./CloseOutlined-Bs9BTzBM.js";import"./DownOutlined-C_92woN3.js";import"./index-DSan05hS.js";import"./EllipsisOutlined-BD0YvPch.js";import"./styleChecker-CQu6Uniq.js";import"./index-DxEnr912.js";import"./Checkbox-D-9_4-G-.js";import"./index-BV9ecpN8.js";import"./collapse-BbEVqHco.js";import"./Pagination-ZTiU5Rel.js";import"./index-ZaNRnAce.js";import"./TextArea-DlB-ovtE.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ue=Q("RefreshCcw",xe),pe=({data:s})=>{const{t:a}=T();if(!s)return e.jsx("h2",{children:"No data"});const m=[{name:a("Score"),value:s.overall_performance_score},{name:a("Remaining"),value:100-s.overall_performance_score}],d=[{name:a("Score"),value:s.problem_handling_score},{name:a("Remaining"),value:100-s.problem_handling_score}],i=[{name:a("Score"),value:s.communication_skills_score},{name:a("Remaining"),value:100-s.communication_skills_score}],u=[{name:a("Score"),value:s.customer_management_score},{name:a("Remaining"),value:100-s.customer_management_score}],r=[{name:a("Score"),value:s.problem_handling_score},{name:a("Remaining"),value:100-s.problem_handling_score}],x=[{metric:a("Overall Score"),series:s==null?void 0:s.overall_performance_score},{metric:a("Communication"),series:s==null?void 0:s.communication_skills_score},{metric:a("Customer Management"),series:s==null?void 0:s.customer_management_score},{metric:a("Problem Handling"),series:s==null?void 0:s.problem_handling_score},{metric:a("Protocol Adherence"),series:s==null?void 0:s.protocol_adherence_score}];return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[e.jsx(c,{data:m,colorEmpty:"#87888C",colorFilled:"#0B72FC",title:a("Overall Score"),Icon:Y}),e.jsx(c,{data:d,colorEmpty:"#87888C",colorFilled:"#E04BC5",title:a("Problem Handling"),Icon:Z}),e.jsx(c,{data:i,colorEmpty:"#87888C",colorFilled:"#4B54D1",title:a("Communication"),Icon:ee}),e.jsx(c,{data:u,colorEmpty:"#87888C",colorFilled:"#8B7DDF",title:a("Customer Management"),Icon:se})]}),e.jsx("div",{className:"max-w-[50%] mt-6 mx-auto",children:e.jsx(c,{data:r,colorEmpty:"#87888C",colorFilled:"#0BA5EC",title:a("Protocol Adherence"),Icon:te})}),e.jsx("div",{className:"my-8",children:e.jsx(oe,{title:a("Performance Metrics"),dataRadar:x})})]})},ts=()=>{var v,C,y,b,N,I,A,B,k,S,w,R;const{t:s}=T(),a=j.useRef(null),[m,d]=j.useState(1),{operatorId:i}=K(),[u]=q(),{data:r}=U({operatorId:parseInt(i)}),x=J(),{data:o,isLoading:_,refetch:$}=V({operatorId:parseInt(i),page:m}),{data:l}=W({id:parseInt(i),page:m}),[L]=X(),[p,O]=j.useState("all_audios"),H=[{title:"ID",dataIndex:"audio_id"},{title:s("Name"),dataIndex:"name",render:t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:re,alt:"Audio file icon",width:40,height:40}),e.jsx("span",{className:"text-white",children:t})]})},{title:s("File upload date"),dataIndex:"file_upload_date",render:t=>e.jsx("div",{children:ne(t)})},{title:s("File size"),dataIndex:"size",render:t=>{const n=h=>(h/1048576).toFixed(2)+" MB";return e.jsx("div",{children:n(t)})}},{title:s("Customer phone"),dataIndex:"phone",render:t=>e.jsx("div",{children:z(t)})},{title:s("Status"),dataIndex:"analysed",render:t=>e.jsx(le,{count:s(t?"Analyzed":"Not analyzed yet"),className:`px-2 py-1 text-xs font-medium rounded-full [&_.ant-badge-count]:shadow-none [&_.ant-badge-count]:bg-[#9FB2C61A] ${t?"[&_.ant-badge-count]:bg-[#34c75937] text-green-500":"text-zinc-400"}`})},{title:s("Actions"),key:"actions",dataIndex:"data",render:(t,n)=>e.jsxs(g,{children:[e.jsx(f,{to:n.analysed?`/pm/call-center/audio/${n.id}`:"",children:e.jsx(P,{color:n.analysed?"#5B9BEC":"#4A554F"})}),e.jsx(D,{icon:e.jsx(ie,{}),type:"text",className:n.analysed?"text-[#4A554F]":"text-[#5B9BEC]",onClick:()=>{u(n.id.toString())}}),e.jsx(f,{to:n.download_link,children:e.jsx(D,{type:"text",icon:e.jsx(ce,{}),className:"hover:text-white hover:bg-zinc-800 !text-[#5B9BEC]"})})]})}],G=[{title:"â„–",dataIndex:"index",render:(t,n,h)=>e.jsx("div",{children:h+1})},{title:s("Customer phone"),dataIndex:"phone",render:t=>e.jsx("div",{children:z(t)})},{title:e.jsx("div",{className:"text-center",children:s("Overall performance score")}),dataIndex:"analysed_calls",render:t=>e.jsx("div",{className:"text-center",children:t.overall_performance_score})},{title:e.jsx("div",{className:"text-center",children:s("Successfully calls")}),dataIndex:"analysed_calls",render:t=>e.jsx("div",{className:"text-center",children:t.successfully_calls})},{title:e.jsx("div",{className:"text-center",children:s("Unsuccessfully calls")}),dataIndex:"analysed_calls",render:t=>e.jsx("div",{className:"text-center",children:t.unsuccessfully_calls})},{title:e.jsx("div",{className:"text-center",children:s("All calls")}),dataIndex:"all_calls",render:t=>e.jsx("div",{className:"text-center",children:t})},{title:s("Actions"),key:"actions",dataIndex:"data",render:(t,n)=>e.jsx(g,{children:e.jsx(f,{to:`/pm/calls-history/${n.phone.replaceAll("+","")}`,children:e.jsx(P,{color:"#5B9BEC"})})})}];return e.jsxs("section",{className:"p-6",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-2",children:[e.jsx("div",{className:"cursor-pointer",onClick:()=>x("/"),children:e.jsx(ae,{isActive:!0})}),e.jsx(E,{}),e.jsx("span",{className:"font-medium cursor-pointer",onClick:()=>x(-1),children:s("Call centre")}),e.jsx(E,{}),e.jsx("span",{className:"font-medium",children:(C=(v=r==null?void 0:r.data)==null?void 0:v[0])==null?void 0:C.name})]}),e.jsx("div",{className:"mb-6 mt-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(me,{src:(b=(y=r==null?void 0:r.data)==null?void 0:y[0])==null?void 0:b.photo,size:64}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white text-3xl font-semibold",children:[(I=(N=r==null?void 0:r.data)==null?void 0:N[0])==null?void 0:I.name," ",(B=(A=r==null?void 0:r.data)==null?void 0:A[0])==null?void 0:B.last_name]}),e.jsx("p",{className:"text-base",children:(S=(k=r==null?void 0:r.data)==null?void 0:k[0])==null?void 0:S.email})]})]})}),e.jsx(pe,{data:(R=(w=r==null?void 0:r.data)==null?void 0:w[0])==null?void 0:R.avarege_score}),e.jsxs("div",{className:"rounded-lg border border-zinc-800 bg-[#343436]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[e.jsx(g,{children:e.jsx(de,{defaultActiveKey:"all_audios",activeKey:p,onChange:O,items:[{key:"all_audios",label:s("All audios")},{key:"customer",label:s("Customers")}]})}),e.jsxs("button",{className:"flex items-center gap-2 text-[#5B9BEC] text-base mr-3",onClick:()=>{a.current=F(s("Refreshing data..."),{autoClose:!1,type:"info"}),L().then(()=>{$(),F.update(a.current,{render:s("Data refreshed successfully"),type:"success",autoClose:2e3})})},children:[e.jsx(ue,{stroke:"#5B9BEC"}),s("Refresh")]})]}),p==="all_audios"&&e.jsx(M,{columns:H,dataSource:(o==null?void 0:o.data)||[],pagination:{total:(o==null?void 0:o.all_data)||0,showSizeChanger:!1,showTotal:(t,n)=>`Page ${n[0]} of ${t}`,onChange:t=>d(t)},loading:_}),p==="customer"&&e.jsx(M,{columns:G,dataSource:(l==null?void 0:l.data)||[],pagination:{total:(l==null?void 0:l.all_data)||0,showSizeChanger:!1,showTotal:(t,n)=>`Page ${n[0]} of ${t}`,onChange:t=>d(t)},loading:_})]})]})};export{ts as default};
