import{R as f,r as u,h as z,k as he,d as W,_ as be,F,i as Se,e as ee,f as Re,g as Ce,ae as Pe,C as ke,D as De}from"./index-DPJpM76q.js";import{u as Ee}from"./useMergedState-CSfwPUM-.js";import{R as Be}from"./index-WMb-X793.js";import{R as Le,q as He,u as We,k as Ke,l as Ye}from"./index-CEm8Loj7.js";import{a as Ge,u as Ze}from"./useSize-DND3t0aL.js";import{F as Xe}from"./context-C9R0sSvt.js";function qe(e){return!!(e.addonBefore||e.addonAfter)}function Ue(e){return!!(e.prefix||e.suffix||e.allowClear)}function ze(e,n,a){var t=n.cloneNode(!0),r=Object.create(e,{target:{value:t},currentTarget:{value:t}});return t.value=a,typeof n.selectionStart=="number"&&typeof n.selectionEnd=="number"&&(t.selectionStart=n.selectionStart,t.selectionEnd=n.selectionEnd),t.setSelectionRange=function(){n.setSelectionRange.apply(n,arguments)},r}function we(e,n,a,t){if(a){var r=n;if(n.type==="click"){r=ze(n,e,""),a(r);return}if(e.type!=="file"&&t!==void 0){r=ze(n,e,t),a(r);return}a(r)}}function Je(e,n){if(e){e.focus(n);var a=n||{},t=a.cursor;if(t){var r=e.value.length;switch(t){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var Qe=f.forwardRef(function(e,n){var a,t,r=e.inputElement,v=e.children,i=e.prefixCls,g=e.prefix,R=e.suffix,p=e.addonBefore,m=e.addonAfter,N=e.className,w=e.style,I=e.disabled,S=e.readOnly,G=e.focused,Z=e.triggerFocus,$=e.allowClear,y=e.value,l=e.handleReset,M=e.hidden,c=e.classes,o=e.classNames,T=e.dataAttrs,A=e.styles,x=e.components,P=e.onClear,C=v??r,d=(x==null?void 0:x.affixWrapper)||"span",U=(x==null?void 0:x.groupWrapper)||"span",J=(x==null?void 0:x.wrapper)||"span",K=(x==null?void 0:x.groupAddon)||"span",k=u.useRef(null),X=function(q){var le;(le=k.current)!==null&&le!==void 0&&le.contains(q.target)&&(Z==null||Z())},D=Ue(e),O=u.cloneElement(C,{value:y,className:z(C.props.className,!D&&(o==null?void 0:o.variant))||null}),B=u.useRef(null);if(f.useImperativeHandle(n,function(){return{nativeElement:B.current||k.current}}),D){var j=null;if($){var _=!I&&!S&&y,h="".concat(i,"-clear-icon"),E=he($)==="object"&&$!==null&&$!==void 0&&$.clearIcon?$.clearIcon:"âœ–";j=f.createElement("span",{onClick:function(q){l==null||l(q),P==null||P()},onMouseDown:function(q){return q.preventDefault()},className:z(h,W(W({},"".concat(h,"-hidden"),!_),"".concat(h,"-has-suffix"),!!R)),role:"button",tabIndex:-1},E)}var Y="".concat(i,"-affix-wrapper"),ne=z(Y,W(W(W(W(W({},"".concat(i,"-disabled"),I),"".concat(Y,"-disabled"),I),"".concat(Y,"-focused"),G),"".concat(Y,"-readonly"),S),"".concat(Y,"-input-with-clear-btn"),R&&$&&y),c==null?void 0:c.affixWrapper,o==null?void 0:o.affixWrapper,o==null?void 0:o.variant),re=(R||$)&&f.createElement("span",{className:z("".concat(i,"-suffix"),o==null?void 0:o.suffix),style:A==null?void 0:A.suffix},j,R);O=f.createElement(d,be({className:ne,style:A==null?void 0:A.affixWrapper,onClick:X},T==null?void 0:T.affixWrapper,{ref:k}),g&&f.createElement("span",{className:z("".concat(i,"-prefix"),o==null?void 0:o.prefix),style:A==null?void 0:A.prefix},g),O,re)}if(qe(e)){var te="".concat(i,"-group"),ae="".concat(te,"-addon"),L="".concat(te,"-wrapper"),ue=z("".concat(i,"-wrapper"),te,c==null?void 0:c.wrapper,o==null?void 0:o.wrapper),de=z(L,W({},"".concat(L,"-disabled"),I),c==null?void 0:c.group,o==null?void 0:o.groupWrapper);O=f.createElement(U,{className:de,ref:B},f.createElement(J,{className:ue},p&&f.createElement(K,{className:ae},p),O,m&&f.createElement(K,{className:ae},m)))}return f.cloneElement(O,{className:z((a=O.props)===null||a===void 0?void 0:a.className,N)||null,style:F(F({},(t=O.props)===null||t===void 0?void 0:t.style),w),hidden:M})}),et=["show"];function tt(e,n){return u.useMemo(function(){var a={};n&&(a.show=he(n)==="object"&&n.formatter?n.formatter:!!n),a=F(F({},a),e);var t=a,r=t.show,v=Se(t,et);return F(F({},v),{},{show:!!r,showFormatter:typeof r=="function"?r:void 0,strategy:v.strategy||function(i){return i.length}})},[e,n])}const at=e=>{let n;return typeof e=="object"&&(e!=null&&e.clearIcon)?n=e:e&&(n={clearIcon:f.createElement(Le,null)}),n};var nt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,rt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],me={},V;function ot(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(n&&me[a])return me[a];var t=window.getComputedStyle(e),r=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),v=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),i=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),g=rt.map(function(p){return"".concat(p,":").concat(t.getPropertyValue(p))}).join(";"),R={sizingStyle:g,paddingSize:v,borderSize:i,boxSizing:r};return n&&a&&(me[a]=R),R}function lt(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;V||(V=document.createElement("textarea"),V.setAttribute("tab-index","-1"),V.setAttribute("aria-hidden","true"),V.setAttribute("name","hiddenTextarea"),document.body.appendChild(V)),e.getAttribute("wrap")?V.setAttribute("wrap",e.getAttribute("wrap")):V.removeAttribute("wrap");var r=ot(e,n),v=r.paddingSize,i=r.borderSize,g=r.boxSizing,R=r.sizingStyle;V.setAttribute("style","".concat(R,";").concat(nt)),V.value=e.value||e.placeholder||"";var p=void 0,m=void 0,N,w=V.scrollHeight;if(g==="border-box"?w+=i:g==="content-box"&&(w-=v),a!==null||t!==null){V.value=" ";var I=V.scrollHeight-v;a!==null&&(p=I*a,g==="border-box"&&(p=p+v+i),w=Math.max(p,w)),t!==null&&(m=I*t,g==="border-box"&&(m=m+v+i),N=w>m?"":"hidden",w=Math.min(m,w))}var S={height:w,overflowY:N,resize:"none"};return p&&(S.minHeight=p),m&&(S.maxHeight=m),S}var it=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],ge=0,pe=1,xe=2,st=u.forwardRef(function(e,n){var a=e,t=a.prefixCls,r=a.defaultValue,v=a.value,i=a.autoSize,g=a.onResize,R=a.className,p=a.style,m=a.disabled,N=a.onChange;a.onInternalAutoSize;var w=Se(a,it),I=Ee(r,{value:v,postState:function(E){return E??""}}),S=ee(I,2),G=S[0],Z=S[1],$=function(E){Z(E.target.value),N==null||N(E)},y=u.useRef();u.useImperativeHandle(n,function(){return{textArea:y.current}});var l=u.useMemo(function(){return i&&he(i)==="object"?[i.minRows,i.maxRows]:[]},[i]),M=ee(l,2),c=M[0],o=M[1],T=!!i,A=function(){try{if(document.activeElement===y.current){var E=y.current,Y=E.selectionStart,ne=E.selectionEnd,re=E.scrollTop;y.current.setSelectionRange(Y,ne),y.current.scrollTop=re}}catch{}},x=u.useState(xe),P=ee(x,2),C=P[0],d=P[1],U=u.useState(),J=ee(U,2),K=J[0],k=J[1],X=function(){d(ge)};Re(function(){T&&X()},[v,c,o,T]),Re(function(){if(C===ge)d(pe);else if(C===pe){var h=lt(y.current,!1,c,o);d(xe),k(h)}else A()},[C]);var D=u.useRef(),O=function(){Ce.cancel(D.current)},B=function(E){C===xe&&(g==null||g(E),i&&(O(),D.current=Ce(function(){X()})))};u.useEffect(function(){return O},[]);var j=T?K:null,_=F(F({},p),j);return(C===ge||C===pe)&&(_.overflowY="hidden",_.overflowX="hidden"),u.createElement(Be,{onResize:B,disabled:!(i||g)},u.createElement("textarea",be({},w,{ref:y,style:_,className:z(t,R,W({},"".concat(t,"-disabled"),m)),disabled:m,value:G,onChange:$})))}),ut=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],ct=f.forwardRef(function(e,n){var a,t=e.defaultValue,r=e.value,v=e.onFocus,i=e.onBlur,g=e.onChange,R=e.allowClear,p=e.maxLength,m=e.onCompositionStart,N=e.onCompositionEnd,w=e.suffix,I=e.prefixCls,S=I===void 0?"rc-textarea":I,G=e.showCount,Z=e.count,$=e.className,y=e.style,l=e.disabled,M=e.hidden,c=e.classNames,o=e.styles,T=e.onResize,A=e.onClear,x=e.onPressEnter,P=e.readOnly,C=e.autoSize,d=e.onKeyDown,U=Se(e,ut),J=Ee(t,{value:r,defaultValue:t}),K=ee(J,2),k=K[0],X=K[1],D=k==null?"":String(k),O=f.useState(!1),B=ee(O,2),j=B[0],_=B[1],h=f.useRef(!1),E=f.useState(null),Y=ee(E,2),ne=Y[0],re=Y[1],te=u.useRef(null),ae=u.useRef(null),L=function(){var s;return(s=ae.current)===null||s===void 0?void 0:s.textArea},ue=function(){L().focus()};u.useImperativeHandle(n,function(){var b;return{resizableTextArea:ae.current,focus:ue,blur:function(){L().blur()},nativeElement:((b=te.current)===null||b===void 0?void 0:b.nativeElement)||L()}}),u.useEffect(function(){_(function(b){return!l&&b})},[l]);var de=f.useState(null),oe=ee(de,2),q=oe[0],le=oe[1];f.useEffect(function(){if(q){var b;(b=L()).setSelectionRange.apply(b,Pe(q))}},[q]);var H=tt(Z,G),ie=(a=H.max)!==null&&a!==void 0?a:p,Ae=Number(ie)>0,fe=H.strategy(D),Ne=!!ie&&fe>ie,ye=function(s,Q){var ce=Q;!h.current&&H.exceedFormatter&&H.max&&H.strategy(Q)>H.max&&(ce=H.exceedFormatter(Q,{max:H.max}),Q!==ce&&le([L().selectionStart||0,L().selectionEnd||0])),X(ce),we(s.currentTarget,s,g,ce)},Ie=function(s){h.current=!0,m==null||m(s)},$e=function(s){h.current=!1,ye(s,s.currentTarget.value),N==null||N(s)},Oe=function(s){ye(s,s.target.value)},Fe=function(s){s.key==="Enter"&&x&&x(s),d==null||d(s)},Te=function(s){_(!0),v==null||v(s)},_e=function(s){_(!1),i==null||i(s)},Ve=function(s){X(""),ue(),we(L(),s,g)},ve=w,se;H.show&&(H.showFormatter?se=H.showFormatter({value:D,count:fe,maxLength:ie}):se="".concat(fe).concat(Ae?" / ".concat(ie):""),ve=f.createElement(f.Fragment,null,ve,f.createElement("span",{className:z("".concat(S,"-data-count"),c==null?void 0:c.count),style:o==null?void 0:o.count},se)));var je=function(s){var Q;T==null||T(s),(Q=L())!==null&&Q!==void 0&&Q.style.height&&re(!0)},Me=!C&&!G&&!R;return f.createElement(Qe,{ref:te,value:D,allowClear:R,handleReset:Ve,suffix:ve,prefixCls:S,classNames:F(F({},c),{},{affixWrapper:z(c==null?void 0:c.affixWrapper,W(W({},"".concat(S,"-show-count"),G),"".concat(S,"-textarea-allow-clear"),R))}),disabled:l,focused:j,className:z($,Ne&&"".concat(S,"-out-of-range")),style:F(F({},y),ne&&!Me?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof se=="string"?se:void 0}},hidden:M,readOnly:P,onClear:A},f.createElement(st,be({},U,{autoSize:C,maxLength:p,onKeyDown:Fe,onChange:Oe,onFocus:Te,onBlur:_e,onCompositionStart:Ie,onCompositionEnd:$e,className:z(c==null?void 0:c.textarea),style:F(F({},o==null?void 0:o.textarea),{},{resize:y==null?void 0:y.resize}),disabled:l,prefixCls:S,onResize:je,ref:ae,readOnly:P})))}),dt=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]]);return a};const ht=u.forwardRef((e,n)=>{var a,t;const{prefixCls:r,bordered:v=!0,size:i,disabled:g,status:R,allowClear:p,classNames:m,rootClassName:N,className:w,style:I,styles:S,variant:G}=e,Z=dt(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:$,direction:y,textArea:l}=u.useContext(ke),M=Ge(i),c=u.useContext(De),o=g??c,{status:T,hasFeedback:A,feedbackIcon:x}=u.useContext(Xe),P=Ye(T,R),C=u.useRef(null);u.useImperativeHandle(n,()=>{var B;return{resizableTextArea:(B=C.current)===null||B===void 0?void 0:B.resizableTextArea,focus:j=>{var _,h;Je((h=(_=C.current)===null||_===void 0?void 0:_.resizableTextArea)===null||h===void 0?void 0:h.textArea,j)},blur:()=>{var j;return(j=C.current)===null||j===void 0?void 0:j.blur()}}});const d=$("input",r),U=Ze(d),[J,K,k]=He(d,U),[X,D]=We("textArea",G,v),O=at(p??(l==null?void 0:l.allowClear));return J(u.createElement(ct,Object.assign({autoComplete:l==null?void 0:l.autoComplete},Z,{style:Object.assign(Object.assign({},l==null?void 0:l.style),I),styles:Object.assign(Object.assign({},l==null?void 0:l.styles),S),disabled:o,allowClear:O,className:z(k,U,w,N,l==null?void 0:l.className),classNames:Object.assign(Object.assign(Object.assign({},m),l==null?void 0:l.classNames),{textarea:z({[`${d}-sm`]:M==="small",[`${d}-lg`]:M==="large"},K,m==null?void 0:m.textarea,(a=l==null?void 0:l.classNames)===null||a===void 0?void 0:a.textarea),variant:z({[`${d}-${X}`]:D},Ke(d,P)),affixWrapper:z(`${d}-textarea-affix-wrapper`,{[`${d}-affix-wrapper-rtl`]:y==="rtl",[`${d}-affix-wrapper-sm`]:M==="small",[`${d}-affix-wrapper-lg`]:M==="large",[`${d}-textarea-show-count`]:e.showCount||((t=e.count)===null||t===void 0?void 0:t.show)},K)}),prefixCls:d,suffix:A&&u.createElement("span",{className:`${d}-textarea-suffix`},x),ref:C})))});export{Qe as B,ht as T,at as g,we as r,Je as t,tt as u};
